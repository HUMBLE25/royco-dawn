# =============================================================================
# Royco Protocol Deployment Configuration
# =============================================================================
# This file contains all configuration required to deploy a Royco market.
# Copy this file to .env and fill in the values before running deployment.
#
# Usage:
#   cp .env.deploy.example .env
#   # Edit .env with your values
#   forge script script/Deploy.s.sol:DeployScript --rpc-url $RPC_URL --broadcast
# =============================================================================

# =============================================================================
# NETWORK CONFIGURATION
# =============================================================================

# RPC URL for the target network
# Examples:
#   Mainnet: https://eth-mainnet.g.alchemy.com/v2/YOUR_API_KEY
#   Sepolia: https://eth-sepolia.g.alchemy.com/v2/YOUR_API_KEY
RPC_URL=

# Etherscan API key for contract verification
ETHERSCAN_API_KEY=

# Enable debug logging (optional, default: false)
DEBUG=false

# =============================================================================
# DEPLOYER CONFIGURATION
# =============================================================================

# Private key of the deployer account
# This account will:
#   1. Deploy all contracts
#   2. Be granted DEPLOYER_ROLE (can deploy new markets)
#   3. Transfer factory admin to FACTORY_ADMIN after deployment
# Format: 0x followed by 64 hex characters
# WARNING: Never commit real private keys to version control!
DEPLOYER_PRIVATE_KEY=0x0000000000000000000000000000000000000000000000000000000000000000

# Address that will be the factory admin after deployment
# This address will have ADMIN_ROLE (role 0) on the AccessManager
# and can manage all other roles
FACTORY_ADMIN=0x0000000000000000000000000000000000000000

# =============================================================================
# MARKET IDENTIFICATION
# =============================================================================

# Unique market identifier (bytes32, hex format)
# This should be unique per market deployment
# Can be generated as: keccak256(abi.encodePacked(marketName, timestamp))
# Format: 0x followed by 64 hex characters
MARKET_ID=0x0000000000000000000000000000000000000000000000000000000000000000

# =============================================================================
# TRANCHE METADATA
# =============================================================================

# Senior Tranche Token Configuration
SENIOR_TRANCHE_NAME="Royco Senior Tranche"
SENIOR_TRANCHE_SYMBOL=RST

# Junior Tranche Token Configuration
JUNIOR_TRANCHE_NAME="Royco Junior Tranche"
JUNIOR_TRANCHE_SYMBOL=RJT

# =============================================================================
# ASSET ADDRESSES
# =============================================================================

# Address of the senior tranche underlying asset
# Common addresses:
#   Mainnet USDC: 0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48
#   Mainnet USDT: 0xdAC17F958D2ee523a2206206994597C13D831ec7
#   Mainnet DAI:  0x6B175474E89094C44Da98b954EescdeCB5BE3830
SENIOR_ASSET=0x0000000000000000000000000000000000000000

# Address of the junior tranche underlying asset
# Usually the same as SENIOR_ASSET for in-kind tranches
JUNIOR_ASSET=0x0000000000000000000000000000000000000000

# =============================================================================
# KERNEL CONFIGURATION
# =============================================================================

# Kernel type determines the yield strategy:
#   0 = ERC4626_ST_AaveV3_JT_InKindAssets
#       Senior deposits into ERC4626 vault, Junior into Aave V3
#   1 = ERC4626_ST_ERC4626_JT_InKindAssets
#       Both tranches deposit into separate ERC4626 vaults
#   2 = ReUSD_ST_ReUSD_JT
#       For ReUSD protocol integration
#   3 = YieldBearingERC20_ST_YieldBearingERC20_JT_IdenticalAssetsChainlinkOracleQuoter
#       For yield-bearing ERC20s with Chainlink price feeds
#   4 = YieldBearingERC4626_ST_YieldBearingERC4626_JT_IdenticalERC4626SharesAdminOracleQuoter
#       For yield-bearing ERC4626 vaults with admin-set oracle
KERNEL_TYPE=0

# Address to receive protocol fees
PROTOCOL_FEE_RECIPIENT=0x0000000000000000000000000000000000000000

# Redemption delay for junior tranche in seconds
# This is the time users must wait after requesting redemption
# Example: 86400 = 1 day, 604800 = 1 week
JT_REDEMPTION_DELAY_SECONDS=86400

# -----------------------------------------------------------------------------
# KERNEL TYPE 0: ERC4626_ST_AaveV3_JT_InKindAssets
# Senior deposits go to an ERC4626 vault, Junior deposits go to Aave V3
# -----------------------------------------------------------------------------

# Address of the ERC4626 vault for senior tranche deposits
ST_VAULT_ADDRESS=0x0000000000000000000000000000000000000000

# Aave V3 Pool address
# Mainnet: 0x87870Bca3F3fD6335C3F4ce8392D69350B4fA4E2
AAVE_V3_POOL_ADDRESS=0x87870Bca3F3fD6335C3F4ce8392D69350B4fA4E2

# -----------------------------------------------------------------------------
# KERNEL TYPE 1: ERC4626_ST_ERC4626_JT_InKindAssets
# Both tranches deposit into separate ERC4626 vaults
# -----------------------------------------------------------------------------

# Address of the ERC4626 vault for junior tranche deposits
# (ST_VAULT_ADDRESS is reused for senior tranche)
JT_VAULT_ADDRESS=0x0000000000000000000000000000000000000000

# -----------------------------------------------------------------------------
# KERNEL TYPE 2: ReUSD_ST_ReUSD_JT
# For ReUSD protocol integration
# -----------------------------------------------------------------------------

# ReUSD token address
REUSD_ADDRESS=0x0000000000000000000000000000000000000000

# ReUSD/USD quote token address (e.g., USDC)
REUSD_USD_QUOTE_TOKEN_ADDRESS=0x0000000000000000000000000000000000000000

# Insurance Capital Layer address
INSURANCE_CAPITAL_LAYER_ADDRESS=0x0000000000000000000000000000000000000000

# -----------------------------------------------------------------------------
# KERNEL TYPE 3: YieldBearingERC20 with Chainlink Oracle
# For yield-bearing ERC20 tokens with Chainlink price feeds
# -----------------------------------------------------------------------------

# Chainlink oracle address for tranche asset to reference asset conversion
TRANCHE_ASSET_TO_REFERENCE_ASSET_ORACLE_ADDRESS=0x0000000000000000000000000000000000000000

# Maximum age of oracle price before considered stale (in seconds)
STALENESS_THRESHOLD_SECONDS=3600

# Initial conversion rate in RAY (1e27 = 1:1)
# This is used before the oracle price is available
INITIAL_CONVERSION_RATE_RAY=1000000000000000000000000000

# -----------------------------------------------------------------------------
# KERNEL TYPE 4: YieldBearingERC4626 with Admin Oracle
# For yield-bearing ERC4626 vaults with admin-controlled oracle
# (Uses INITIAL_CONVERSION_RATE_RAY from above)
# -----------------------------------------------------------------------------

# =============================================================================
# ACCOUNTANT CONFIGURATION
# =============================================================================

# Protocol fees in WAD (1e18 = 100%)
# These fees are taken from yield before distribution
# Example: 1e17 = 10%, 5e16 = 5%, 1e16 = 1%
ST_PROTOCOL_FEE_WAD=100000000000000000
JT_PROTOCOL_FEE_WAD=100000000000000000

# Coverage requirement in WAD (1e18 = 100%)
# Minimum JT coverage required for ST to enter fixed term state
# Example: 2e17 = 20% (JT must be at least 20% of ST)
COVERAGE_WAD=200000000000000000

# Beta parameter in WAD (1e18 = 100%)
# Controls yield distribution when JT utilization is below target
# 0 = Different opportunities (JT gets higher yield share at low util)
# 1e18 = Same opportunities (linear distribution)
BETA_WAD=0

# Loan-to-Liquidation-Threshold-Value in WAD (1e18 = 100%)
# Maximum ratio of ST assets to total assets before liquidation risk
# Example: 97e16 = 97%
LLTV_WAD=970000000000000000

# Fixed term duration in seconds
# Duration of the fixed term state when triggered
# Example: 1209600 = 2 weeks, 2592000 = 30 days
FIXED_TERM_DURATION_SECONDS=1209600

# Dust tolerance in asset units (not WAD)
# Minimum amount considered non-zero for accounting purposes
# Example: 1 = 1 wei, 1000000 = 1 USDC (6 decimals)
DUST_TOLERANCE=1

# =============================================================================
# YDM (YIELD DISTRIBUTION MODEL) CONFIGURATION
# =============================================================================

# YDM type determines how yield is distributed between tranches:
#   0 = StaticCurve - Fixed yield share curve
#   1 = AdaptiveCurve - Dynamic yield share based on utilization
YDM_TYPE=1

# -----------------------------------------------------------------------------
# YDM TYPE 0: StaticCurve
# Fixed JT yield share at different utilization levels
# -----------------------------------------------------------------------------

# JT yield share when utilization is 0% (WAD)
# Example: 2e17 = 20%
YDM_JT_YIELD_SHARE_AT_ZERO_UTIL_WAD=200000000000000000

# JT yield share at target utilization (WAD)
# Example: 225e15 = 22.5%
YDM_JT_YIELD_SHARE_AT_TARGET_UTIL_WAD=225000000000000000

# JT yield share when utilization is 100% (WAD)
# Example: 1e18 = 100%
YDM_JT_YIELD_SHARE_AT_FULL_UTIL_WAD=1000000000000000000

# -----------------------------------------------------------------------------
# YDM TYPE 1: AdaptiveCurve
# Dynamic yield share based on utilization
# Uses YDM_JT_YIELD_SHARE_AT_TARGET_UTIL_WAD and YDM_JT_YIELD_SHARE_AT_FULL_UTIL_WAD
# from above
# -----------------------------------------------------------------------------

# =============================================================================
# ROLE CONFIGURATION
# =============================================================================
# Each role has an address (who holds the role). Execution delays are
# configured in RolesConfiguration.sol.
#
# Role hierarchy:
#   ADMIN_ROLE (0) - Can manage all roles, held by FACTORY_ADMIN
#   ├── ADMIN_PAUSER_ROLE - Can pause/unpause contracts (no delay)
#   ├── ADMIN_UPGRADER_ROLE - Can upgrade UUPS contracts (1 day delay)
#   ├── SYNC_ROLE - Can sync tranche accounting (no delay)
#   ├── ADMIN_KERNEL_ROLE - Can configure kernel parameters (1 day delay)
#   ├── ADMIN_ACCOUNTANT_ROLE - Can configure accountant parameters (1 day delay)
#   ├── ADMIN_PROTOCOL_FEE_SETTER_ROLE - Can set protocol fees (1 day delay)
#   ├── ADMIN_ORACLE_QUOTER_ROLE - Can configure oracle quoters (no delay)
#   ├── LP_ROLE_ADMIN_ROLE - Can manage LP_ROLE grants (no delay)
#   │   └── LP_ROLE - Can deposit/redeem from tranches (no delay)
#   ├── DEPLOYER_ROLE_ADMIN_ROLE - Can manage DEPLOYER_ROLE grants (no delay)
#   │   └── DEPLOYER_ROLE - Can deploy new markets (no delay)
#   └── GUARDIAN_ROLE - Can cancel scheduled operations for all roles (no delay)
# =============================================================================

# -----------------------------------------------------------------------------
# PAUSER ROLE - Can pause/unpause contracts in emergencies
# -----------------------------------------------------------------------------
PAUSER_ADDRESS=0x0000000000000000000000000000000000000000

# -----------------------------------------------------------------------------
# UPGRADER ROLE - Can upgrade UUPS proxy implementations
# -----------------------------------------------------------------------------
UPGRADER_ADDRESS=0x0000000000000000000000000000000000000000

# -----------------------------------------------------------------------------
# SYNC ROLE - Can call syncTrancheAccounting on kernel
# -----------------------------------------------------------------------------
SYNC_ROLE_ADDRESS=0x0000000000000000000000000000000000000000

# -----------------------------------------------------------------------------
# KERNEL ADMIN ROLE - Can configure kernel parameters
# Functions: setProtocolFeeRecipient, setJuniorTrancheRedemptionDelay
# -----------------------------------------------------------------------------
ADMIN_KERNEL_ROLE_ADDRESS=0x0000000000000000000000000000000000000000

# -----------------------------------------------------------------------------
# ACCOUNTANT ADMIN ROLE - Can configure accountant parameters
# Functions: setYDM, setCoverage, setBeta, setLLTV, setFixedTermDuration, setDustTolerance
# -----------------------------------------------------------------------------
ADMIN_ACCOUNTANT_ROLE_ADDRESS=0x0000000000000000000000000000000000000000

# -----------------------------------------------------------------------------
# PROTOCOL FEE SETTER ROLE - Can set protocol fee rates
# Functions: setSeniorTrancheProtocolFee, setJuniorTrancheProtocolFee
# -----------------------------------------------------------------------------
ADMIN_PROTOCOL_FEE_SETTER_ROLE_ADDRESS=0x0000000000000000000000000000000000000000

# -----------------------------------------------------------------------------
# ORACLE QUOTER ADMIN ROLE - Can configure oracle quoters
# Functions: setConversionRate, setTrancheAssetToReferenceAssetOracle
# -----------------------------------------------------------------------------
ADMIN_ORACLE_QUOTER_ROLE_ADDRESS=0x0000000000000000000000000000000000000000

# -----------------------------------------------------------------------------
# LP ROLE ADMIN - Can grant/revoke LP_ROLE to addresses
# -----------------------------------------------------------------------------
LP_ROLE_ADMIN_ROLE_ADDRESS=0x0000000000000000000000000000000000000000

# -----------------------------------------------------------------------------
# GUARDIAN ROLE - Can cancel any scheduled operations
# This is a security role that can stop malicious timelocked operations
# -----------------------------------------------------------------------------
GUARDIAN_ADDRESS=0x0000000000000000000000000000000000000000

# -----------------------------------------------------------------------------
# DEPLOYER ROLE - Can deploy new markets via factory.deployMarket()
# Note: The deployer account is automatically granted this role
# Set DEPLOYER_ADDRESS to grant to additional accounts
# -----------------------------------------------------------------------------
DEPLOYER_ADDRESS=0x0000000000000000000000000000000000000000

# -----------------------------------------------------------------------------
# DEPLOYER ROLE ADMIN - Can grant/revoke DEPLOYER_ROLE
# -----------------------------------------------------------------------------
DEPLOYER_ADMIN_ADDRESS=0x0000000000000000000000000000000000000000

# =============================================================================
# END OF CONFIGURATION
# =============================================================================
